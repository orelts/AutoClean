\hypertarget{classDriver_1_1driver_1_1Driver}{}\doxysection{Driver.\+driver.\+Driver Class Reference}
\label{classDriver_1_1driver_1_1Driver}\index{Driver.driver.Driver@{Driver.driver.Driver}}


Inheritance diagram for Driver.\+driver.\+Driver\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{classDriver_1_1driver_1_1Driver__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Driver.\+driver.\+Driver\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{classDriver_1_1driver_1_1Driver__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classDriver_1_1driver_1_1Driver_a05533dffc9464dccd94e1ec79f4666c6}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self)
\item 
def \mbox{\hyperlink{classDriver_1_1driver_1_1Driver_a3acb2ecd8027b64947790a044c716b5f}{handle\+\_\+command}} (self, \mbox{\hyperlink{namespaceDriver_1_1driver_a031d903e18d1517d3f7fb534f1dbe406}{angle}}, \mbox{\hyperlink{namespaceDriver_1_1driver_ae367d587f3dd27c4ca3643b4c3bfe2e8}{distance}}=5, rotation\+\_\+speed=50, driving\+\_\+speed=50)
\begin{DoxyCompactList}\small\item\em this function uses the 2 following functions to preform a manuever in when given a driving distance and rotating angle. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classDriver_1_1driver_1_1Driver_ac739b4bc853734a9d20beac1ade97da4}{rotate\+\_\+in\+\_\+angle}} (self, \mbox{\hyperlink{namespaceDriver_1_1driver_a031d903e18d1517d3f7fb534f1dbe406}{angle}}, \mbox{\hyperlink{namespaceDriver_1_1driver_a55b189da86a838cbb5d97772846a8910}{speed}}=100)
\begin{DoxyCompactList}\small\item\em this function uses the readings from the pixhawk to determine how much the robot needs to turn. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classDriver_1_1driver_1_1Driver_ad03ed53c6a09fc89a6631250c42e42c5}{drive\+\_\+distance}} (self, \mbox{\hyperlink{namespaceDriver_1_1driver_ae367d587f3dd27c4ca3643b4c3bfe2e8}{distance}}, \mbox{\hyperlink{namespaceDriver_1_1driver_a55b189da86a838cbb5d97772846a8910}{speed}}=100)
\begin{DoxyCompactList}\small\item\em this function calculates the duration of the drive according to the length needed to be driven. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classDriver_1_1driver_1_1Driver_a9d44503e72206487b54b39d7d9c5d142}{last\+\_\+err}}
\item 
\mbox{\hyperlink{classDriver_1_1driver_1_1Driver_a66cdd42121b209df340e07d2b4721dc3}{speed\+\_\+ratio}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 9 of file driver.\+py.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classDriver_1_1driver_1_1Driver_a05533dffc9464dccd94e1ec79f4666c6}\label{classDriver_1_1driver_1_1Driver_a05533dffc9464dccd94e1ec79f4666c6}} 
\index{Driver.driver.Driver@{Driver.driver.Driver}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!Driver.driver.Driver@{Driver.driver.Driver}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def Driver.\+driver.\+Driver.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Reimplemented from \mbox{\hyperlink{classDriver_1_1sabertooth_1_1Sabertooth_ab7215895b3d3c6a0f3570f1c85a98165}{Driver.\+sabertooth.\+Sabertooth}}.



Definition at line 10 of file driver.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{10     \textcolor{keyword}{def }\_\_init\_\_(self):}
\DoxyCodeLine{11         super(Driver, self).\_\_init\_\_()}
\DoxyCodeLine{12         self.last\_err = 1}
\DoxyCodeLine{13         self.speed\_ratio = 10}
\DoxyCodeLine{14 }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classDriver_1_1driver_1_1Driver_ad03ed53c6a09fc89a6631250c42e42c5}\label{classDriver_1_1driver_1_1Driver_ad03ed53c6a09fc89a6631250c42e42c5}} 
\index{Driver.driver.Driver@{Driver.driver.Driver}!drive\_distance@{drive\_distance}}
\index{drive\_distance@{drive\_distance}!Driver.driver.Driver@{Driver.driver.Driver}}
\doxysubsubsection{\texorpdfstring{drive\_distance()}{drive\_distance()}}
{\footnotesize\ttfamily def Driver.\+driver.\+Driver.\+drive\+\_\+distance (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{distance,  }\item[{}]{speed = {\ttfamily 100} }\end{DoxyParamCaption})}



this function calculates the duration of the drive according to the length needed to be driven. 



Definition at line 90 of file driver.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{90     \textcolor{keyword}{def }drive\_distance(self, distance, speed=100):}
\DoxyCodeLine{91         print(\textcolor{stringliteral}{"speed in drive distance is \{\}"}.format(speed))}
\DoxyCodeLine{92         \textcolor{keywordflow}{if} speed == 0:}
\DoxyCodeLine{93             \textcolor{keywordflow}{return}}
\DoxyCodeLine{94         dur = distance / (speed * self.speed\_ratio)}
\DoxyCodeLine{95         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{96             print(\textcolor{stringliteral}{"driving speed \{\}"}.format(speed))}
\DoxyCodeLine{97             self.drive\_forward(speed, duration=dur)}
\DoxyCodeLine{98             self.stop()}
\DoxyCodeLine{99             \textcolor{comment}{\# while time.time() -\/ start < 5:}}
\DoxyCodeLine{100             \textcolor{comment}{\#     if distance < 0:  \# drive backward}}
\DoxyCodeLine{101             \textcolor{comment}{\#         self.saber.drive\_backwards(speed)}}
\DoxyCodeLine{102             \textcolor{comment}{\#     else:}}
\DoxyCodeLine{103             \textcolor{comment}{\#         self.saber.drive\_forward(speed)}}
\DoxyCodeLine{104         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{105             self.stop()}
\DoxyCodeLine{106             \textcolor{keywordflow}{raise} e}
\DoxyCodeLine{107         self.stop()}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 }

\end{DoxyCode}
\mbox{\Hypertarget{classDriver_1_1driver_1_1Driver_a3acb2ecd8027b64947790a044c716b5f}\label{classDriver_1_1driver_1_1Driver_a3acb2ecd8027b64947790a044c716b5f}} 
\index{Driver.driver.Driver@{Driver.driver.Driver}!handle\_command@{handle\_command}}
\index{handle\_command@{handle\_command}!Driver.driver.Driver@{Driver.driver.Driver}}
\doxysubsubsection{\texorpdfstring{handle\_command()}{handle\_command()}}
{\footnotesize\ttfamily def Driver.\+driver.\+Driver.\+handle\+\_\+command (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{angle,  }\item[{}]{distance = {\ttfamily 5},  }\item[{}]{rotation\+\_\+speed = {\ttfamily 50},  }\item[{}]{driving\+\_\+speed = {\ttfamily 50} }\end{DoxyParamCaption})}



this function uses the 2 following functions to preform a manuever in when given a driving distance and rotating angle. 

first it rotates and then drives. 

Definition at line 17 of file driver.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{17     \textcolor{keyword}{def }handle\_command(self, angle, distance=5, rotation\_speed=50, driving\_speed=50):}
\DoxyCodeLine{18         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{19             print(\textcolor{stringliteral}{"angle in driver is \{\}, distance is \{\} and speed is \{\}"}.format(angle, distance, driving\_speed))}
\DoxyCodeLine{20             \textcolor{comment}{\# print ("Vehcile rotating in \{\} degrees for distance \{\} in speed \{\}".format(angle, distance, driving\_speed))}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22             self.rotate\_in\_angle(angle, rotation\_speed)}
\DoxyCodeLine{23             self.drive\_distance(distance, driving\_speed)}
\DoxyCodeLine{24         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{25             self.saber.stop()}
\DoxyCodeLine{26             \textcolor{keywordflow}{raise} e}
\DoxyCodeLine{27 }

\end{DoxyCode}
\mbox{\Hypertarget{classDriver_1_1driver_1_1Driver_ac739b4bc853734a9d20beac1ade97da4}\label{classDriver_1_1driver_1_1Driver_ac739b4bc853734a9d20beac1ade97da4}} 
\index{Driver.driver.Driver@{Driver.driver.Driver}!rotate\_in\_angle@{rotate\_in\_angle}}
\index{rotate\_in\_angle@{rotate\_in\_angle}!Driver.driver.Driver@{Driver.driver.Driver}}
\doxysubsubsection{\texorpdfstring{rotate\_in\_angle()}{rotate\_in\_angle()}}
{\footnotesize\ttfamily def Driver.\+driver.\+Driver.\+rotate\+\_\+in\+\_\+angle (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{angle,  }\item[{}]{speed = {\ttfamily 100} }\end{DoxyParamCaption})}



this function uses the readings from the pixhawk to determine how much the robot needs to turn. 

it gets the initial heading and calculates the final heading. when it reaches the final heading the robot stops. 

Definition at line 33 of file driver.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{33     \textcolor{keyword}{def }rotate\_in\_angle(self, angle, speed=100):}
\DoxyCodeLine{34         values\_for\_mean = 5}
\DoxyCodeLine{35         \textcolor{keywordflow}{if} speed == 0:}
\DoxyCodeLine{36             \textcolor{keywordflow}{return}}
\DoxyCodeLine{37         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{38             vals = get\_top\_table\_elem(cursor, \textcolor{stringliteral}{"heading\_"}, \textcolor{stringliteral}{"SensorsInfo"}, values\_for\_mean)}
\DoxyCodeLine{39             initial\_heading = [int(item) \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} vals]}
\DoxyCodeLine{40             initial\_heading = sum(initial\_heading)/len(initial\_heading)}
\DoxyCodeLine{41 }
\DoxyCodeLine{42             curr = initial\_heading}
\DoxyCodeLine{43             diff = 0}
\DoxyCodeLine{44             is\_at\_edge = \textcolor{keyword}{False}}
\DoxyCodeLine{45             target = (initial\_heading + angle) \% 360}
\DoxyCodeLine{46 }
\DoxyCodeLine{47             \textcolor{keywordflow}{while} diff < self.last\_err * abs(angle):}
\DoxyCodeLine{48                 last = curr}
\DoxyCodeLine{49                 vals = get\_top\_table\_elem(cursor, \textcolor{stringliteral}{"heading\_"}, \textcolor{stringliteral}{"SensorsInfo"}, values\_for\_mean)}
\DoxyCodeLine{50                 curr = [int(item) \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} vals]}
\DoxyCodeLine{51                 curr = sum(curr) / len(curr)}
\DoxyCodeLine{52                 \textcolor{keywordflow}{if} abs(last -\/ curr) > 300:}
\DoxyCodeLine{53                     is\_at\_edge = \textcolor{keyword}{True}}
\DoxyCodeLine{54                 \textcolor{keywordflow}{if} is\_at\_edge:}
\DoxyCodeLine{55                     diff = 360 -\/ abs(initial\_heading -\/ curr)}
\DoxyCodeLine{56                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{57                     diff = abs(initial\_heading -\/ curr)}
\DoxyCodeLine{58 }
\DoxyCodeLine{59                 \textcolor{comment}{\# print("diff is \{\}".format(diff))}}
\DoxyCodeLine{60                 \textcolor{keywordflow}{if} diff >= 0.95 * abs(angle):}
\DoxyCodeLine{61                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{62                 err = abs(angle) -\/ diff}
\DoxyCodeLine{63                 ctl\_speed = int(speed * err / abs(angle)) + 15}
\DoxyCodeLine{64                 \textcolor{keywordflow}{if} ctl\_speed < 30:}
\DoxyCodeLine{65                     ctl\_speed = 30}
\DoxyCodeLine{66                 \textcolor{keywordflow}{if} angle < 0:  \textcolor{comment}{\# rotate left}}
\DoxyCodeLine{67                     print(\textcolor{stringliteral}{"left with speed \{\}"}.format(ctl\_speed))}
\DoxyCodeLine{68                     self.turn\_left(ctl\_speed, 2, \textcolor{keyword}{True})}
\DoxyCodeLine{69                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{70                     print(\textcolor{stringliteral}{"right with speed \{\}"}.format(ctl\_speed))}
\DoxyCodeLine{71                     self.turn\_right(ctl\_speed, 2, \textcolor{keyword}{True})}
\DoxyCodeLine{72             driver.stop()}
\DoxyCodeLine{73 }
\DoxyCodeLine{74             vals = get\_top\_table\_elem(cursor, \textcolor{stringliteral}{"heading\_"}, \textcolor{stringliteral}{"SensorsInfo"}, values\_for\_mean)}
\DoxyCodeLine{75             finished\_actual = [int(item) \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} vals]}
\DoxyCodeLine{76             finished\_actual = sum(finished\_actual)/len(finished\_actual)}
\DoxyCodeLine{77             \textcolor{keywordflow}{if} is\_at\_edge:}
\DoxyCodeLine{78                 finished\_diff = 360 -\/ abs(initial\_heading -\/ finished\_actual)}
\DoxyCodeLine{79             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{80                 finished\_diff = abs(initial\_heading -\/ finished\_actual)}
\DoxyCodeLine{81 }
\DoxyCodeLine{82             self.last\_err = self.last\_err * (abs(angle) / finished\_diff)}
\DoxyCodeLine{83 }
\DoxyCodeLine{84         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{85             self.stop()}
\DoxyCodeLine{86             \textcolor{keywordflow}{raise} e}
\DoxyCodeLine{87         self.stop()}
\DoxyCodeLine{88 }

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classDriver_1_1driver_1_1Driver_a9d44503e72206487b54b39d7d9c5d142}\label{classDriver_1_1driver_1_1Driver_a9d44503e72206487b54b39d7d9c5d142}} 
\index{Driver.driver.Driver@{Driver.driver.Driver}!last\_err@{last\_err}}
\index{last\_err@{last\_err}!Driver.driver.Driver@{Driver.driver.Driver}}
\doxysubsubsection{\texorpdfstring{last\_err}{last\_err}}
{\footnotesize\ttfamily Driver.\+driver.\+Driver.\+last\+\_\+err}



Definition at line 12 of file driver.\+py.

\mbox{\Hypertarget{classDriver_1_1driver_1_1Driver_a66cdd42121b209df340e07d2b4721dc3}\label{classDriver_1_1driver_1_1Driver_a66cdd42121b209df340e07d2b4721dc3}} 
\index{Driver.driver.Driver@{Driver.driver.Driver}!speed\_ratio@{speed\_ratio}}
\index{speed\_ratio@{speed\_ratio}!Driver.driver.Driver@{Driver.driver.Driver}}
\doxysubsubsection{\texorpdfstring{speed\_ratio}{speed\_ratio}}
{\footnotesize\ttfamily Driver.\+driver.\+Driver.\+speed\+\_\+ratio}



Definition at line 13 of file driver.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{driver_8py}{driver.\+py}}\end{DoxyCompactItemize}
