\hypertarget{classSensors_1_1telemetry_1_1Telemetry}{}\doxysection{Sensors.\+telemetry.\+Telemetry Class Reference}
\label{classSensors_1_1telemetry_1_1Telemetry}\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}


class to hold dronekit A\+PI vehicle handler and connect to it.  




Collaboration diagram for Sensors.\+telemetry.\+Telemetry\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=236pt]{classSensors_1_1telemetry_1_1Telemetry__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a66f0bcfc54cb05d3dd90185ba4b089a2}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, vehicle\+\_\+connected)
\begin{DoxyCompactList}\small\item\em constructor of telemetry which connects to vehicle or simulation \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a5ad7fdc5913abf465f80292c67097963}{initialize}} (self, indoor)
\begin{DoxyCompactList}\small\item\em Download the vehicle waypoints (commands) to acquire take-\/off parameters. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a8f1993cd20d837bc706c7401f7e5a221}{read\+\_\+information}} (self)
\begin{DoxyCompactList}\small\item\em One time read information from the Pixhawk flight computer. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_ae83dcda2d2821dd83a40258d999f617e}{read\+\_\+channel8}} (self)
\begin{DoxyCompactList}\small\item\em Reads C\+H8\+IN (the drone operator can signal the T\+X2 through this channel). \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a9abb48fe4f38a856a5f727f592446272}{is\+\_\+arm}} (self)
\begin{DoxyCompactList}\small\item\em Reads armed status of the system (arm is ready to flight -\/ motors are running) Disarm is while on ground. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a52233528e4ce1e1c8f713b387031eb96}{close}} (self)
\begin{DoxyCompactList}\small\item\em Closing interface \& simulation (if there is) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_ac1ec4eaf2372ce0d4e4ffa908ac19491}{vehicle\+Connected}}
\begin{DoxyCompactList}\small\item\em holds True if we\textquotesingle{}re running this on a T\+X2 connected to the Pixhawk by Uart (Telem2) and False otherwise \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_acd7c230af45d9e59819ff7b5f12c7666}{sitl}}
\begin{DoxyCompactList}\small\item\em simulation handle if we don\textquotesingle{}t use the pixhawk itself \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a66c68607dc5c5f6a7068c0ff7c49dd95}{vehicle}}
\begin{DoxyCompactList}\small\item\em vehicle is a dronekit\+A\+PI class for the connection to the vehicle \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
class to hold dronekit A\+PI vehicle handler and connect to it. 

this class connect either to vehicle or simulation and implement methods to read info from pixhawk 

Definition at line 38 of file telemetry.\+py.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_a66f0bcfc54cb05d3dd90185ba4b089a2}\label{classSensors_1_1telemetry_1_1Telemetry_a66f0bcfc54cb05d3dd90185ba4b089a2}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def Sensors.\+telemetry.\+Telemetry.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{vehicle\+\_\+connected }\end{DoxyParamCaption})}



constructor of telemetry which connects to vehicle or simulation 


\begin{DoxyParams}{Parameters}
{\em vehicle\+\_\+connected} & True/\+False \\
\hline
\end{DoxyParams}


Definition at line 42 of file telemetry.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{42     \textcolor{keyword}{def }\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a66f0bcfc54cb05d3dd90185ba4b089a2}{\_\_init\_\_}}(self, vehicle\_connected):}
\DoxyCodeLine{43         }
\DoxyCodeLine{44         self.vehicleConnected = vehicle\_connected}
\DoxyCodeLine{45 }
\DoxyCodeLine{46         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.vehicleConnected:}
\DoxyCodeLine{47             }
\DoxyCodeLine{48             self.sitl = dronekit\_sitl.start\_default()  \textcolor{comment}{\# (sitl.start)}}
\DoxyCodeLine{49             connection\_string = self.sitl.connection\_string()  \textcolor{comment}{\# now we have the connection string (the ip and udp port)}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51         print(\textcolor{stringliteral}{"Connecting with the drone"})}
\DoxyCodeLine{52         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.vehicleConnected:}
\DoxyCodeLine{53             }
\DoxyCodeLine{54             self.vehicle = connect(connection\_string,}
\DoxyCodeLine{55                                    wait\_ready=\textcolor{keyword}{True})  \textcolor{comment}{\# wait\_ready flag hold the program until all the parameters have been read}}
\DoxyCodeLine{56         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{57             print(\textcolor{stringliteral}{"Trying to connect"})}
\DoxyCodeLine{58             self.vehicle = connect(\textcolor{stringliteral}{'/dev/ttyTHS2'}, wait\_ready=\textcolor{keyword}{True}, \textcolor{comment}{\# in j121 it was ttyTHS1}}
\DoxyCodeLine{59                                    baud=57600)  \textcolor{comment}{\# this is the name of the Pixhawk/Telem2 as the TX2 sees it;}}
\DoxyCodeLine{60             \textcolor{comment}{\# the same baud rate as configured in the Pixhawk using Mission Planner}}
\DoxyCodeLine{61         print(\textcolor{stringliteral}{"Connection success"})}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_a52233528e4ce1e1c8f713b387031eb96}\label{classSensors_1_1telemetry_1_1Telemetry_a52233528e4ce1e1c8f713b387031eb96}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!close@{close}}
\index{close@{close}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily def Sensors.\+telemetry.\+Telemetry.\+close (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Closing interface \& simulation (if there is) 


\begin{DoxyParams}{Parameters}
{\em -\/} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/ 
\end{DoxyReturn}


Definition at line 135 of file telemetry.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{135     \textcolor{keyword}{def }\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a52233528e4ce1e1c8f713b387031eb96}{close}}(self):}
\DoxyCodeLine{136         self.vehicle.\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a52233528e4ce1e1c8f713b387031eb96}{close}}()}
\DoxyCodeLine{137         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.vehicleConnected:}
\DoxyCodeLine{138             self.sitl.stop()}
\DoxyCodeLine{139 }
\DoxyCodeLine{140         print(\textcolor{stringliteral}{"Telemetry is closed"})}
\DoxyCodeLine{141 }
\DoxyCodeLine{142 }

\end{DoxyCode}
\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_a5ad7fdc5913abf465f80292c67097963}\label{classSensors_1_1telemetry_1_1Telemetry_a5ad7fdc5913abf465f80292c67097963}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!initialize@{initialize}}
\index{initialize@{initialize}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily def Sensors.\+telemetry.\+Telemetry.\+initialize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{indoor }\end{DoxyParamCaption})}



Download the vehicle waypoints (commands) to acquire take-\/off parameters. 


\begin{DoxyParams}{Parameters}
{\em indoor} & True/\+False \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/ 
\end{DoxyReturn}


Definition at line 68 of file telemetry.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{68     \textcolor{keyword}{def }\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a5ad7fdc5913abf465f80292c67097963}{initialize}}(self, indoor):}
\DoxyCodeLine{69         print(\textcolor{stringliteral}{"Initialization..."})}
\DoxyCodeLine{70         \textcolor{keywordflow}{if} indoor:}
\DoxyCodeLine{71             cmds = self.vehicle.commands}
\DoxyCodeLine{72             cmds.download()}
\DoxyCodeLine{73             cmds.wait\_ready()}
\DoxyCodeLine{74             print(\textcolor{stringliteral}{"Indoor initialization completed"})}
\DoxyCodeLine{75         \textcolor{keywordflow}{else}:  \textcolor{comment}{\# if there won't be a GPS signal, we will stuck here (self.vehicle.home\_location will be None forever)}}
\DoxyCodeLine{76             num\_satellites = 0}
\DoxyCodeLine{77             GPSInfo(\textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, satellites\_visible=num\_satellites)}
\DoxyCodeLine{78             \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} self.vehicle.home\_location:}
\DoxyCodeLine{79                 cmds = self.vehicle.commands}
\DoxyCodeLine{80                 cmds.download()}
\DoxyCodeLine{81                 cmds.wait\_ready()}
\DoxyCodeLine{82                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.vehicle.home\_location:  \textcolor{comment}{\# will be `None` until first set by autopilot and download completes}}
\DoxyCodeLine{83                     print(\textcolor{stringliteral}{"Waiting for home location..."})}
\DoxyCodeLine{84                     time.sleep(1)}
\DoxyCodeLine{85             print(\textcolor{stringliteral}{"\(\backslash\)n Home location: \{\}"}.format(self.vehicle.home\_location))}
\DoxyCodeLine{86             print(\textcolor{stringliteral}{"GPS info: \{\}"}.format(self.vehicle.gps\_0))}
\DoxyCodeLine{87             print(\textcolor{stringliteral}{"Visible satellites: \{\}"}.format(num\_satellites))}
\DoxyCodeLine{88             print(\textcolor{stringliteral}{"Outdoor initialization completed"})}
\DoxyCodeLine{89 }

\end{DoxyCode}
\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_a9abb48fe4f38a856a5f727f592446272}\label{classSensors_1_1telemetry_1_1Telemetry_a9abb48fe4f38a856a5f727f592446272}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!is\_arm@{is\_arm}}
\index{is\_arm@{is\_arm}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{is\_arm()}{is\_arm()}}
{\footnotesize\ttfamily def Sensors.\+telemetry.\+Telemetry.\+is\+\_\+arm (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Reads armed status of the system (arm is ready to flight -\/ motors are running) Disarm is while on ground. 


\begin{DoxyParams}{Parameters}
{\em -\/} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
vehicle.\+armed True/\+False 
\end{DoxyReturn}


Definition at line 114 of file telemetry.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{114     \textcolor{keyword}{def }\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a9abb48fe4f38a856a5f727f592446272}{is\_arm}}(self):}
\DoxyCodeLine{115         self.vehicle.wait\_ready(\textcolor{keyword}{True})}
\DoxyCodeLine{116         \textcolor{keywordflow}{return} self.vehicle.armed}
\DoxyCodeLine{117 }

\end{DoxyCode}
\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_ae83dcda2d2821dd83a40258d999f617e}\label{classSensors_1_1telemetry_1_1Telemetry_ae83dcda2d2821dd83a40258d999f617e}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!read\_channel8@{read\_channel8}}
\index{read\_channel8@{read\_channel8}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{read\_channel8()}{read\_channel8()}}
{\footnotesize\ttfamily def Sensors.\+telemetry.\+Telemetry.\+read\+\_\+channel8 (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Reads C\+H8\+IN (the drone operator can signal the T\+X2 through this channel). 

Used for reset the system 

Definition at line 106 of file telemetry.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{106     \textcolor{keyword}{def }\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_ae83dcda2d2821dd83a40258d999f617e}{read\_channel8}}(self):}
\DoxyCodeLine{107         self.vehicle.wait\_ready(\textcolor{keyword}{True})}
\DoxyCodeLine{108         \textcolor{keywordflow}{return} self.vehicle.channels[\textcolor{stringliteral}{'8'}]}
\DoxyCodeLine{109 }

\end{DoxyCode}
\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_a8f1993cd20d837bc706c7401f7e5a221}\label{classSensors_1_1telemetry_1_1Telemetry_a8f1993cd20d837bc706c7401f7e5a221}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!read\_information@{read\_information}}
\index{read\_information@{read\_information}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{read\_information()}{read\_information()}}
{\footnotesize\ttfamily def Sensors.\+telemetry.\+Telemetry.\+read\+\_\+information (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



One time read information from the Pixhawk flight computer. 

\begin{DoxyReturn}{Returns}
sensors\+\_\+info class 
\end{DoxyReturn}


Definition at line 93 of file telemetry.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{93     \textcolor{keyword}{def }\mbox{\hyperlink{classSensors_1_1telemetry_1_1Telemetry_a8f1993cd20d837bc706c7401f7e5a221}{read\_information}}(self):}
\DoxyCodeLine{94         self.vehicle.wait\_ready(\textcolor{keyword}{True})  \textcolor{comment}{\# waits for specified attributes to be populated from the vehicle (values are initially None).}}
\DoxyCodeLine{95         takeoff\_alt\_barom = self.vehicle.location.global\_frame.alt}
\DoxyCodeLine{96         sensors\_info = SensorsInfo(\mbox{\hyperlink{namespaceSensors_1_1telemetry_a4d0d80317f800fdd25cfedf43e056651}{check\_none}}(self.vehicle.location.global\_relative\_frame.lat),}
\DoxyCodeLine{97                     \mbox{\hyperlink{namespaceSensors_1_1telemetry_a4d0d80317f800fdd25cfedf43e056651}{check\_none}}(self.vehicle.heading),}
\DoxyCodeLine{98                     \mbox{\hyperlink{namespaceSensors_1_1telemetry_a4d0d80317f800fdd25cfedf43e056651}{check\_none}}(self.vehicle.location.global\_frame.alt -\/ takeoff\_alt\_barom),}
\DoxyCodeLine{99                     \mbox{\hyperlink{namespaceSensors_1_1telemetry_a4d0d80317f800fdd25cfedf43e056651}{check\_none}}(self.vehicle.groundspeed),}
\DoxyCodeLine{100                     \textcolor{comment}{\# check\_none(self.vehicle.home\_location),}}
\DoxyCodeLine{101                     \mbox{\hyperlink{namespaceSensors_1_1telemetry_a4d0d80317f800fdd25cfedf43e056651}{check\_none}}(self.vehicle.last\_heartbeat)}
\DoxyCodeLine{102                     )}
\DoxyCodeLine{103         \textcolor{keywordflow}{return} sensors\_info}
\DoxyCodeLine{104 }

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_acd7c230af45d9e59819ff7b5f12c7666}\label{classSensors_1_1telemetry_1_1Telemetry_acd7c230af45d9e59819ff7b5f12c7666}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!sitl@{sitl}}
\index{sitl@{sitl}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{sitl}{sitl}}
{\footnotesize\ttfamily Sensors.\+telemetry.\+Telemetry.\+sitl}



simulation handle if we don\textquotesingle{}t use the pixhawk itself 



Definition at line 48 of file telemetry.\+py.

\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_a66c68607dc5c5f6a7068c0ff7c49dd95}\label{classSensors_1_1telemetry_1_1Telemetry_a66c68607dc5c5f6a7068c0ff7c49dd95}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!vehicle@{vehicle}}
\index{vehicle@{vehicle}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{vehicle}{vehicle}}
{\footnotesize\ttfamily Sensors.\+telemetry.\+Telemetry.\+vehicle}



vehicle is a dronekit\+A\+PI class for the connection to the vehicle 



Definition at line 54 of file telemetry.\+py.

\mbox{\Hypertarget{classSensors_1_1telemetry_1_1Telemetry_ac1ec4eaf2372ce0d4e4ffa908ac19491}\label{classSensors_1_1telemetry_1_1Telemetry_ac1ec4eaf2372ce0d4e4ffa908ac19491}} 
\index{Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}!vehicleConnected@{vehicleConnected}}
\index{vehicleConnected@{vehicleConnected}!Sensors.telemetry.Telemetry@{Sensors.telemetry.Telemetry}}
\doxysubsubsection{\texorpdfstring{vehicleConnected}{vehicleConnected}}
{\footnotesize\ttfamily Sensors.\+telemetry.\+Telemetry.\+vehicle\+Connected}



holds True if we\textquotesingle{}re running this on a T\+X2 connected to the Pixhawk by Uart (Telem2) and False otherwise 



Definition at line 44 of file telemetry.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{telemetry_8py}{telemetry.\+py}}\end{DoxyCompactItemize}
